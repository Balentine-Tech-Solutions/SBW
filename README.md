# SBW CLI Tool - Version 1.0.0-alpha

**Status**: ✅ MVP Ready | **Release**: November 2025 | **Version**: 1.0.0-alpha

The SBW (Shoot-By-Wire) CLI Tool is a production-ready Python-based command-line application for decoding, decrypting, and visualizing SBW log files generated by embedded firmware. Designed for defense weapons systems with ITAR compliance support.

## Overview

This tool implements the complete host-side processing pipeline for SBW data:

**Decode → Decrypt → Decompress → Parse TLV → Export/Visualize**

### Key Features

- ✅ **AES-GCM Decryption**: Defense-grade encryption with 256-bit keys
- ✅ **Multi-Block Processing**: Handles multiple encrypted blocks with error recovery
- ✅ **LZ4 Decompression**: Fast compression with graceful fallback
- ✅ **TLV Parsing**: IMU, Temperature, Health, and Session metadata extraction
- ✅ **Flexible Export**: CSV and JSON formats with timestamps and metadata
- ✅ **Rich Visualization**: Time-series plots and summary dashboards
- ✅ **Robust Error Handling**: Block-level isolation and partial recovery
- ✅ **Security Features**: Input validation, audit logging, ITAR compliance
- ✅ **Cross-Platform**: Windows, macOS, and Linux support
- ✅ **CLI Tools**: decode, info, and validate commands
- ✅ **Comprehensive Testing**: 31 unit tests, >80% code coverage
- ✅ **CI/CD Ready**: GitHub Actions for automated testing and deployment

## Installation

### Prerequisites

- Python 3.10, 3.11, or 3.12
- pip package manager
- 2GB RAM minimum (4GB recommended)

### Quick Start

```bash
# Clone the repository
git clone https://github.com/Balentine-Tech-Solutions/SBW.git
cd SBW

# Create virtual environment
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate

# Install in development mode
pip install -e .
```

For detailed installation instructions see [INSTALL.md](INSTALL.md)

## Quick Usage

### Basic Commands

```bash
# Decode and export to CSV
sbw-cli decode input.sbw --out output/

# Full analysis with all outputs
sbw-cli decode input.sbw --out results/ --csv --json --plots

# Inspect file without decoding
sbw-cli info input.sbw

# Validate file integrity
sbw-cli validate input.sbw

# With verbose output
sbw-cli decode input.sbw --out analysis/ --verbose --csv --json
```

### Available Commands

#### `decode` - Full Processing Pipeline

```bash
sbw-cli decode INPUT_FILE --out OUTPUT_DIR [OPTIONS]
```

Options:
- `--csv` - Export data to CSV format
- `--json` - Export data to JSON format
- `--plots` - Generate visualization plots
- `--config FILE` - Use custom configuration file
- `--verbose` - Enable verbose logging

#### `info` - File Inspection

```bash
sbw-cli info INPUT_FILE [--verbose]
```

Displays file information including:
- File size and modification time
- Number of blocks
- Block details when using `--verbose`

#### `validate` - Integrity Checking

```bash
sbw-cli validate INPUT_FILE
```

Checks for:
- Valid block structure
- Block boundary integrity
- File corruption indicators

## Output Files

The tool generates organized output in the specified directory:

### Data Exports

- `imu_data.csv` - Accelerometer and gyroscope readings with timestamps
- `temperature_data.csv` - Temperature sensor measurements
- `health_data.csv` - Battery voltage, CPU temperature, memory usage, error codes
- `sbw_data_complete.json` - Complete dataset with metadata
- `imu_data.json`, `temperature_data.json`, `health_data.json` - Per-type JSON exports

### Visualizations

- `imu_accelerometer.png` - Accel X/Y/Z vs time plots
- `imu_gyroscope.png` - Gyro X/Y/Z vs time plots
- `temperature.png` - Temperature trend graph
- `health_metrics.png` - System health metrics dashboard
- `summary_dashboard.png` - Combined overview with all data types

## Configuration

The tool supports JSON and YAML configuration files. See [QUICKSTART.md](QUICKSTART.md) for example configurations.

Default configuration is used if no file is specified:

```json
{
  "crypto": {
    "algorithm": "AES-GCM",
    "tag_length": 16,
    "nonce_length": 12
  },
  "compression": {
    "algorithm": "lz4"
  },
  "export": {
    "timestamp_format": "%Y-%m-%d %H:%M:%S.%f",
    "csv_delimiter": ","
  },
  "visualization": {
    "figure_size": [12, 8],
    "dpi": 300
  }
}
```

## Development

For comprehensive development documentation, architecture details, and contribution guidelines, see [DEVELOPMENT.md](DEVELOPMENT.md).

### Quick Development Setup

```powershell
# Clone repository
git clone https://github.com/your-org/sbw-cli.git
cd sbw-cli

# Create virtual environment
python -m venv venv
.\venv\Scripts\Activate.ps1

# Install in development mode
pip install -e ".[dev]"
```

### Running Tests

```powershell
# Run all tests with coverage
python -m pytest tests/ -v --cov=sbw_cli

# Run specific test module
python -m pytest tests/test_crypto.py -v

# Run with markers
python -m pytest tests/ -m "not integration"
```

### Pre-commit Hooks

All commits should pass code quality checks:

```powershell
pre-commit run --all-files
```

## Architecture

### Processing Pipeline

The tool uses a staged pipeline architecture:

1. **File Loading**: Read and validate SBW log files with format detection
2. **Block Parsing**: Extract encrypted blocks using LG-1.0 specification
3. **Decryption**: AES-GCM decryption using EN-1.0 crypto profile
4. **Decompression**: LZ4 decompression with Heatshrink fallback
5. **TLV Parsing**: Parse sensor data using TL-1.0 specification
6. **Export**: Generate CSV and JSON output files
7. **Visualization**: Create time-series plots and dashboards

### Error Handling

- **Block-level isolation**: Detects corrupted blocks and continues processing
- **Partial recovery**: Validates file integrity and exports valid data
- **Detailed logging**: Comprehensive error reporting with block indices
- **Graceful degradation**: Continues on decompression failure with fallback

## Mark I Scope (v1.0.0-alpha)

**MVP Status**: Production-ready with comprehensive testing and documentation

### ✅ Fully Implemented

- **Core Decoding**: Complete LG-1.0 block parsing, EN-1.0 AES-GCM decryption, TL-1.0 TLV parsing
- **File Operations**: decode, info (file inspection), validate (integrity checking)
- **Data Export**: CSV, JSON, Pandas DataFrame, Matplotlib visualization
- **Error Recovery**: Block-level error isolation with partial success on corrupted files
- **Configuration**: JSON/YAML config files with environment variable overrides
- **Security**: Path traversal protection, key validation, audit logging with file hashing
- **Testing**: 31 unit tests with >80% code coverage, all tests passing
- **CI/CD**: GitHub Actions workflow for Windows, macOS, and Linux
- **Documentation**: 6 comprehensive markdown guides (1,500+ lines)

### ⏳ Future Enhancements (Mark II+)

- Real-time streaming decoding
- WiFi/BLE interface support
- Cloud backend integration
- Advanced visualization dashboards
- Custom data processing plugins
- SQL database backend

## Contributing

For contribution guidelines, see [DEVELOPMENT.md](DEVELOPMENT.md). This project maintains strict code quality standards and comprehensive test coverage requirements.

## Security & Compliance

### Defense Weapons Development Context

This SBW CLI tool is designed for **defense weapons systems** and includes security features for regulatory compliance:

#### Security Features Implemented

- **Path Traversal Protection**: Validates all file paths to prevent directory traversal attacks
- **Key Validation**: Enforces 256-bit AES key requirements for encryption operations
- **Block Overflow Protection**: Validates block sizes and prevents buffer overflow attacks
- **Audit Logging**: File hash tracking (SHA-256) and comprehensive operation logging
- **Secure Defaults**: AES-GCM with 256-bit keys and 128-bit authentication tags

#### Regulatory Compliance

##### ITAR (International Traffic in Arms Regulations)

- Export control compliance framework for defense-related technology
- Requires proper classification and access control
- Restricts international sharing of technical specifications
- Documented encryption and security implementations

##### Defense Security Standards

- AES-GCM encryption ensures defense-grade data security (FIPS 140-2 compatible)
- Secure key management and distribution procedures
- Protected handling of weapons system telemetry data
- Version control and audit trails for change management

#### Before Production Deployment

The following steps must be completed before deploying in classified environments:

- [ ] Security clearance verification for all personnel
- [ ] Formal security review and approval by security team
- [ ] ITAR compliance documentation and registration
- [ ] Classified environment configuration and hardening
- [ ] Personnel training on secure coding and data handling
- [ ] Audit trail verification and logging setup
- [ ] Incident response procedures and contact information

*Note: All security implementations must be reviewed and approved by appropriate security personnel before deployment in classified environments.*

## Technical Specifications

The tool implements the following specifications:

- **LG-1.0**: Block header format (12-byte structure with raw_size, compressed_size, flags, nonce_size, block_id)
- **EN-1.0**: Encryption profile (AES-GCM with 256-bit keys, 96-bit nonces, 128-bit tags)
- **TL-1.0**: TLV data format (types: 0x01=IMU, 0x02=Temperature, 0x03=Health, 0x04=Session, 0x05=Timestamp)

## Support

For technical issues or questions:

1. Check the verbose logging output (`--verbose`)
2. Review error messages and warnings
3. Verify input file format and integrity
4. Contact the development team with detailed error logs

---

**SBW CLI Tool v1.0.0** - SBWv1.i2 Mark I Prototype  
Developed by Demond Balentine for Balentine Tech Solutions
